<ion-header>
  <ion-toolbar>
      <ion-buttons slot="start">
          <ion-back-button defaultHref="login"></ion-back-button>
        </ion-buttons>
        <ion-title>
          Sign Up
        </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
    <ion-grid no-padding>
      <ion-row>
        <ion-col size-xl='6' size-md='8' size-sm='10' offset-xl='3' offset-md='2' offset-sm='1' no-padding>
            <ion-card style="margin-top:2vh;">
              <form #regForm="ngForm" (ngSubmit)='signupUser(regForm)'>
                  <ion-grid>
                    <ion-row padding-horizontal>

                      <ion-col>
                          <ion-grid>
                            <ion-row>
                              <ion-col>
                                  <ion-item>
                                      <ion-label position="floating">Name</ion-label>
                                      <ion-input type='text' name="name" #name='ngModel' [(ngModel)]='signup.name' required></ion-input>
                                    </ion-item>
                                    <ion-label color='danger' *ngIf='!name.valid && name.touched'>Name is required!</ion-label>
                              </ion-col>
                            </ion-row>
                              <ion-row>
                              <ion-col>
                                  <ion-item>
                                      <ion-label position="floating">Age</ion-label>
                                      <ion-input type='number' min='0' name="age" #age='ngModel' [(ngModel)]='signup.age' required [class.invalid]='age.value<=0'></ion-input>
                                    </ion-item>
                                    <ion-label color='danger' *ngIf='!age.valid && age.touched'>Age is required!</ion-label><br/>
                                    <ion-label color='danger' *ngIf='age.touched && (age.value<=0 || age.value>200)'>Please Enter Valid Age!</ion-label>
                                  </ion-col>
                            </ion-row>
                            <ion-row>
                                <ion-col>
                                    <ion-item>
                                        <ion-label position="floating">Gender</ion-label>
                                        <ion-select name="gender" [(ngModel)]='signup.gender'>
                                          <ion-select-option value="Female">Female</ion-select-option>
                                          <ion-select-option value="Male">Male</ion-select-option>
                                        </ion-select>
                                      </ion-item>
                                </ion-col>
                              </ion-row>
                              <ion-row>
                                <ion-col>
                                    <ion-item>
                                        <ion-label position="floating">Address</ion-label>
                                        <ion-textarea name="gender" rows='1' [(ngModel)]='signup.address'></ion-textarea>
                                      </ion-item>
                                </ion-col>
                              </ion-row>
                          </ion-grid>
                        </ion-col>
                      </ion-row>
                      <ion-row padding-horizontal>
                        <ion-col padding size='12' size-sm='6'>
                          <ion-item>
                            <ion-label position="floating">Email</ion-label>
                            <ion-input type="email" name="mailId" pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,3}$" #email='ngModel'  [(ngModel)]='signup.email' required></ion-input>
                          </ion-item>
                          <div *ngIf='!email.valid && email.touched'>
                              <ion-label color='danger' *ngIf='email.errors.pattern'> Please Enter a Valid Email Id!</ion-label> 
                               <!-- pattern='/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,4}$/' regexp that takes everything false -->
                              <ion-label color='danger' *ngIf='email.errors.required'> Email is required!</ion-label>
                          </div>
                        </ion-col>
                        <ion-col padding>
                          <ion-item>
                            <ion-label position="floating">Mobile No</ion-label>
                            <ion-input type='tel' name="phone" #phone='ngModel'
                            pattern="[0-9]{10}" [(ngModel)]='signup.phone'></ion-input>
                          </ion-item>
                          <div *ngIf='!phone.valid && phone.touched'>
                              <ion-label color='danger' *ngIf='phone.errors.pattern'> Please Enter a Valid Mobile No!</ion-label> 
                              <ion-label color='danger' *ngIf='phone.errors.required'> Mobile Number is required!</ion-label>
                          </div>
                        </ion-col>
                      </ion-row>
                      <!-- <ion-row padding-horizontal>
                        <ion-col size-sm='6' padding>
                            <ion-item>
                              <ion-label position="floating">Blood Group</ion-label>
                              <ion-select name="bloodGroup" [(ngModel)]='signup.bloodGroup'>
                                <ion-select-option value="A RhD positive (A+)">
                                  A RhD positive (A+)
                                </ion-select-option>
                                <ion-select-option value="A RhD negative (A-)">
                                  A RhD negative (A-)
                                </ion-select-option>
                                <ion-select-option value="B RhD positive (B+)">
                                  B RhD positive (B+)
                                </ion-select-option>
                                <ion-select-option value="B RhD negative (B-)">
                                  B RhD negative (B-)
                                </ion-select-option>
                                <ion-select-option value="O RhD positive (O+)">
                                  O RhD positive (O+)
                                </ion-select-option>
                                <ion-select-option value="O RhD negative (O-)">
                                  O RhD negative (O-)
                                </ion-select-option>
                                <ion-select-option value="AB RhD positive (AB+)">
                                  AB RhD positive (AB+)
                                </ion-select-option>
                                <ion-select-option value="AB RhD negative (AB-)">
                                  AB RhD negative (AB-)
                                </ion-select-option>
                                  
                              </ion-select>
                            </ion-item>
                          </ion-col>
                      </ion-row> -->
                    <ion-row padding-horizontal>
                      <ion-col padding>
                        <ion-item>
                          <ion-label position="floating">Password</ion-label>
                          <ion-input type='password' name="pwd" #pwd='ngModel' [(ngModel)]='signup.password' minlength='6' required></ion-input>
                        </ion-item>
                        <div *ngIf='!pwd.valid && pwd.touched'>
                            <ion-label color='danger' *ngIf='pwd.errors.required'>Password is required!</ion-label>
                            <ion-label color='danger' *ngIf='pwd.errors.minlength'>Password should contain minimum 6 characters!</ion-label>
                        </div>
                        
                      </ion-col>
                      <ion-col padding>
                          <ion-item>
                            <ion-label position="floating">Confirm Password</ion-label>
                            <ion-input type='password' tabindex="1" #cpwd='ngModel' name="confirmpwd" [(ngModel)]='signup.confirmpassword' 
                            required></ion-input>
                          </ion-item>
                          <div *ngIf='cpwd.touched'>
                              <ion-label color='danger' *ngIf='!cpwd.valid'>Password confirmation is required</ion-label><br/>
                              <ion-label color='danger' *ngIf='!(signup.password===signup.confirmpassword)'>
                                  Both Password and Confirm Password should be same
                          </ion-label>
                          </div>
                            </ion-col>
                    </ion-row>
                    <ion-row >
                      <ion-col>
                        
                    </ion-col>
                    </ion-row>
                    <!-- <ion-row padding-horizontal>
                      <ion-col padding>
                        <app-imagepicker (imagePick)='imagePicked()'></app-imagepicker>
                      </ion-col>
                    </ion-row> -->
                    <ion-row padding-horizontal text-center>
                        <ion-col >
                          <ion-button type='submit' [disabled]='(!regForm.valid)'>Sign up</ion-button>
                        </ion-col>
                      </ion-row>
                  </ion-grid>
              </form>
              </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
    
  </ion-content>
